define("bookingSingleDateManager",function(require){var $=require("jquery");var bookingWidgetDateModule=require("booking-widget-date-module");var create=function(options){var self={pickers:[],init:function(){self.cacheDom();bookingWidgetDateModule.init({datePickerOptions:{display:1,ranged:false,dateChange:this.onDateSelected,inline:true,dark:false}});self.attachHandlers();self.attachWidgets();return self},dom:{},cacheDom:function(){self.dom={};self.dom.bookingTypes=options.dom?$(options.dom.bookingTypes):options.bookingTypes;self.dom.dateSelectors=self.dom.bookingTypes.find(".booking-option.singledate-selector");self.dom.datePickerContainer=self.dom.dateSelectors.find(".singledate-selector-wrapper");self.dom.datePickerButtons=self.dom.dateSelectors.find(".datepicker-button");self.dom.dateLabel=null;self.dom.dateParameter=null},attachHandlers:function(){self.dom.datePickerButtons.on("click",function(e){var el=$(e.target);if(el.length==0){return false}var container=el.closest(".singledate-selector");if(container.hasClass("open")){container.removeClass("open");return}container.addClass("opening");if(container.length==0){return false}self.dom.dateLabel=$(".checkin",container);var datepicker=$(".date-picker",container);var bookingParameters=datepicker.data("parameters");self.setParameters(bookingParameters,container);self.dom.dateLabel.on("date-selected",function(e){var el=$(e.currentTarget);if(el.length==0){return false}el.closest(".singledate-selector").removeClass("open")})});self.dom.bookingTypes.find(".booking-option").on("booking:close",function(e){var force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;self.dateSelectorReset(e,force)});self.dom.dateSelectors.find(".booking-button").on("focusin",function(e){var el=$(e.relatedTarget);if(el.parents(".date-container").length>0){self.dateSelectorReset(e,true)}})},setParameters:function(parameters,container){if(!parameters&&parameters.length==0){return}self.dom.dateParameter=$('input[name="'+parameters[0]+'"]',container)},attachWidgets:function(){self.pickers=bookingWidgetDateModule.setupDatePickers(self.dom.dateSelectors)},onDateSelected:function(value){if(!value||!value.dateArray){return}var startDisplayDate=bookingWidgetDateModule.getDisplayDateFullMonthFirst(value.startDate);self.dom.dateLabel.html(startDisplayDate);self.dom.dateParameter.val(bookingWidgetDateModule.formatDateSelection(value.startDate));self.dom.dateLabel.addClass("selected");self.dom.dateLabel.trigger("date-selected");var bookingLabel=self.dom.dateLabel.parents(".booking-option-label");if(bookingLabel.length>0){bookingLabel.addClass("is-populated")}},dateSelectorReset:function(el){var force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var element=$(el.currentTarget);if(!element.find(".date-container")){if(element.hasClass("open")){$(".singledate-selector").removeClass("open")}return}bookingWidgetDateModule.dateSelectorReset(el,self.dom.dateSelectors,force)}};return self.init()};return{create:create}});