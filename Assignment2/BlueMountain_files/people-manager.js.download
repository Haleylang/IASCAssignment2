define("peopleManager",function(require){var $=require("jquery");require("peopleSelector");var create=function(formManager){var dateManager=null;var self={peopleSelectorConfig:{},init:function(){self.cacheDom();self.attachHandlers();self.attachWidgets();return self},setDateManager:function(newDateManager){dateManager=newDateManager},dom:{},cacheDom:function(){self.dom.peopleSelectors=formManager.dom.bookingTypes.find(".booking-option.people-selector");self.dom.peopleSelectorWrappers=self.dom.peopleSelectors.find(".people-selector-wrapper");self.dom.peopleSelectorWidgets=self.dom.peopleSelectorWrappers.find(".people-selector-widget")},showHidePeopleSelector:function(){var parent=$(this).parent(".people-selector");if(dateManager){dateManager.dateSelectorReset()}if(formManager){formManager.selectorClose(formManager.dom.bookingTypeSelectContainer,"open select-open");formManager.showHideSelector(parent,"open")}},peopleSelectorClose:function(){formManager.selectorClose(self.dom.peopleSelectors,"open")},attachHandlers:function(){self.dom.peopleSelectors.on("click",".booking-option-label-container, .booking-option, .booking-option.people-selector",self.showHidePeopleSelector).on("peopleSelector.updated",function(e){var $this=$(this),$label=$this.find(".booking-option-label"),$subtext=$label.find(".subtext"),$text=$label.find(".text");var subtextStyle="";var textStyle="";var textClass="";var isMobile=Modernizr.mq("only screen and (max-width: 767px)");var isDesktop=Modernizr.mq("only screen and (min-width: 1024px)");var isTablet=Modernizr.mq("only screen and (min-width: 756px)")&&!isDesktop;if(isMobile){subtextStyle="width:auto; display: inline-block;";textStyle="width:auto;"}else if(isTablet){textClass="text-ellipsis"}if(!$subtext.length){$label.prepend('<div class="subtext" style="'+subtextStyle+'">'+$text.text()+"</div>")}$this.find(".booking-option-label").find(".text").text(e.message);$text.attr("style",textStyle);if(textClass.length){$text.addClass(textClass)}})},attachWidgets:function(){self.dom.peopleSelectorWidgets.peopleSelector()}};return self.init()};return{create:create}});