define("video-player-vimeo",function(require){"use strict";var $=require("jquery"),vimeoPlayer=require("vimeoPlayer"),defaults={baseUrlParams:{api:1},onFinish:$.noop,onPlay:$.noop,onPlayProgress:$.noop,onPause:$.noop,onReady:$.noop,onStop:$.noop,onTogglePlayback:$.noop};function bind(vimeo){vimeo.init=init.bind(vimeo);vimeo.play=play.bind(vimeo);vimeo.pause=pause.bind(vimeo);vimeo.stop=stop.bind(vimeo);vimeo.mute=mute.bind(vimeo);vimeo.isPlay=isPlay.bind(vimeo);vimeo.getDimensions=getDimensions.bind(vimeo);vimeo.togglePlayback=togglePlayback.bind(vimeo);vimeo.bindEvents=bindEvents.bind(vimeo)}function create(id,element,url,options){var vimeo={};vimeo.options=$.extend({},defaults,options);vimeo.id=id;vimeo.url=url;vimeo.isReady=true;vimeo.isPlaying=false;vimeo.hasBeenStarted=false;bind(vimeo);vimeo.init($(element));return vimeo}function bindEvents(){this.player.on("pause",this.pause);this.player.on("ended",this.options.onFinish);this.player.on("play",this.play);this.player.on("stop",this.stop);this.player.on("togglePlayback",this.togglePlayback);this.player.on("timeupdate",this.options.onPlayProgress)}function init(element){var self=this;this.element=$(element);var attrSrc=this.element.attr("src");if(attrSrc===""||attrSrc===undefined){this.element.attr("src",this.element.data("src"))}this.player=new vimeoPlayer(element);self.player.ready().then(function(){self.isReady=true;self.options.onReady();self.player.off("pause");self.player.off("play");self.player.off("stop");self.player.off("togglePlayback");self.player.off("timeupdate");self.bindEvents();if(self.isPlaying){self.play()}})}function getDimensions(callback){var self=this;if(self.player&&callback){self.player.getVideoWidth().then(function(width){self.player.getVideoHeight().then(function(height){callback({width:width,height:height,aspectRatio:width/height})})})}}function mute(){if(this.player){this.player.setVolume(0)}}function isPlay(){return this.isPlaying}function play(){this.hasBeenStarted=true;this.isPlaying=true;if(this.player&&this.isReady){this.player.play();this.options.onPlay()}}function pause(){if(this.isPlaying&&this.player&&this.isReady){this.player.pause();this.options.onPause();this.isPlaying=false;return true}return false}function stop(){this.isPlaying=false;if(this.player&&this.isReady){this.player.setCurrentTime(0);this.player.pause();this.options.onStop()}}function togglePlayback(){if(this.player){this.player.getPaused().then(function(paused){if(paused){this.player.play()}else{this.player.pause()}});this.options.onTogglePlayback()}}return{create:create}});