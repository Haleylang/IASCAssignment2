define("dateSelectorV2",function(require){var i18Nlang;var winLang=document.documentElement.lang;if(winLang&&winLang.startsWith("fr")){i18Nlang={previousMonth:"",nextMonth:"",months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthsShort:["jan","fév","mar","avr","mai","jun","jul","aoû","sep","oct","nov","déc"],weekdays:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],weekdaysShort:["D","L","M","M","J","V","S"]}}else{i18Nlang={previousMonth:"",nextMonth:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["S","M","T","W","T","F","S"]}}var $=require("jquery"),Pikaday=require("pikaday"),pluginName="dateSelectorV2",helpers=require("helpers"),defaults={modal:false,reposition:true,field:"input",container:".date-selector-wrapper",rowContainer:".booking-widget",bottom:false,checkinDate:".checkin-date",bookingType:".booking-type",desktopBreakpoint:Modernizr.mq("only screen and (min-width: 1024px)"),tabletBreakpoint:Modernizr.mq("only screen and (min-width: 756px)"),smallBreakpoint:Modernizr.mq("only screen and (max-width: 767px)"),isMobile:Modernizr.touch,minDate:new Date,defaultDate:new Date,setDefaultDate:true,i18n:i18Nlang,onSelect:$.noop,numberOfMonths:1,index:0,sectionId:""};var DateSelector=function(element,options){this.element=element;this.datepicker={};this._isOpening=false;if($(this.element).hasClass("two-letter-week-labels")){if(winLang&&winLang.startsWith("fr")){defaults.i18n.weekdaysShort=["DI","LU","MA","ME","JE","VE","SA"]}else{defaults.i18n.weekdaysShort=["SU","MO","TU","WE","TH","FR","SA"]}}else{if(winLang&&winLang.startsWith("fr")){defaults.i18n.weekdaysShort=["D","L","M","M","J","V","S"]}else{defaults.i18n.weekdaysShort=["S","M","T","W","T","F","S"]}}this.options=$.extend({},defaults,options);this.$modal=[];this.init();this.timer=null};DateSelector.prototype={init:function(){setPikadayDateFormat();this._cacheDom();this._create();this._attachHandlers()},get:function(){return this.datepicker},getDate:function(){return this.datepicker.getDate()},toString:function(){return this.datepicker.toString()},_cacheDom:function(){this.$element=$(this.element);this.$container=this.$element.find(this.options.container);this.$field=this.$element.find(this.options.field);this.$trigger=this.$element.find(this.options.trigger);this.$rowContainer=this.$element.closest(this.options.rowContainer);this.$bookingType=this.$element.closest(this.options.bookingType);this.$checkinDate=this.$bookingType.find(this.options.checkinDate);this.hasContainer=this.$container.length?true:false;this.hasField=this.$field.length?true:false;this.hasTrigger=this.$trigger.length?true:false;this.leftPosOptOut=this.$container.hasClass("css-pos");if(this.options.modal){this.$modal=$("<div></div>").addClass(pluginName+"_modal mobile-only")}},_create:function(){var p=new Pikaday({i18n:this.options.i18n,showDaysInNextAndPreviousMonths:true,minDate:this.options.minDate,maxDate:this.options.maxDate,defaultDate:this.options.defaultDate,setDefaultDate:this.options.defaultDate,reposition:false,field:this.hasField?this.$field[0]:null,trigger:this.hasTrigger?this.$trigger[0]:null,container:this.hasContainer?this.$container[0]:null,onDraw:$.proxy(this.options.onDraw||this._onDraw,this),onOpen:$.proxy(this._onOpen,this),onClose:$.proxy(this.options.onClose||this._onClose,this),onSelect:$.proxy(this.options.onSelect,this),setPosition:$.proxy(this.options.setPosition||this._setPosition,this),numberOfMonths:this.options.numberOfMonths,index:this.options.index,sectionId:this.options.sectionId});this.datepicker=p;this.$datepickerEl=$(p.el);if(this.options.preventHideOnSelect){this.datepicker.reallyHide=this.datepicker.hide;this.datepicker.hide=$.noop}},_attachHandlers:function(){$(window).on("resize",$.proxy(helpers.debounce(this._setPosition,100,false),this))},_onDraw:function(){this._setPosition(true);this._isOpening=false},_onOpen:function(){this.timer=window.setTimeout($.proxy(function(){this.timer=null},this),100);this._isOpening=true;this._setPosition();this.$container.show();if(this.options.modal){$("body").append(this.$modal)}if(this.options.onOpen){$.proxy(this.options.onOpen,this)()}},_onClose:function(){if(this.timer!==null){this.datepicker.show();return}this.$container.hide();if(this.options.modal){this.$modal.remove()}var strVal=this.toString();if(strVal){this.$field.val(strVal)}},_setPosition:function(checkIfOpening){this.options.desktopBreakpoint=Modernizr.mq("only screen and (min-width: 1024px)");this.options.tabletBreakpoint=Modernizr.mq("only screen and (min-width: 768px)");this.options.smallBreakPoint=Modernizr.mq("only screen and (max-width: 767px)");this.options.isMobile=Modernizr.mq("only screen and (max-width: 767px)")&&Modernizr.touch;var isTabletOrDesktop=this.options.tabletBreakpoint;if(!this.options.reposition){return}if(checkIfOpening&&this._isOpening){return}var bottomOrTop=this.options.bottom?"top":"bottom",styles={};if(this.hasContainer&&!this.leftPosOptOut){var outerHeight=this.$rowContainer.outerHeight();if(!isTabletOrDesktop){styles[bottomOrTop]=outerHeight/2+20+"px";var options=this.$bookingType.find(".booking-options");var isRightDate=this.$element.is(".complementary.right");var isCheckOutDate=this.$element.is(".checkout-date");if(options.length&&isRightDate&&!isCheckOutDate){styles.left=-((options.outerWidth()-40)/2)+"px"}else{styles.left=0}}else{styles[bottomOrTop]=outerHeight+"px";var baseLeft=this.$rowContainer&&this.$rowContainer.length!==0?this.$rowContainer.offset().left:0,leftOffset=this.$element.offset().left,baseOffset=leftOffset-baseLeft;if(this.$checkinDate.length){styles.left=this.$checkinDate.offset().left-baseLeft+this.$checkinDate.outerWidth()/2}else{var containerOuterWidth=this.$container.outerWidth(),newLeft=baseOffset-containerOuterWidth/2+this.$element.outerWidth()/2,windowWidth=$(window).width();if(baseLeft+newLeft+containerOuterWidth>windowWidth){newLeft=windowWidth-containerOuterWidth-baseLeft}styles.left=newLeft}}this.$container.css(styles)}else{styles.left="50%";if(this.hasTrigger){styles[bottomOrTop]=this.$trigger.offset().top-this.$trigger.outerHeight()}else{styles[bottomOrTop]=this.$field.offset().top}this.$datepickerEl.css(styles)}}};$.fn[pluginName]=function(methodOrOptions){var method,options;if(typeof methodOrOptions==="string"){method=DateSelector.prototype[methodOrOptions];return method.apply(this.data("plugin_"+pluginName))}options=methodOrOptions;return this.each(function(){if(!$.data(this,"plugin_"+pluginName)){$.data(this,"plugin_"+pluginName,new DateSelector(this,options))}})};function setPikadayDateFormat(){Pikaday.prototype.toString=function(){var date=this._d;return helpers.dateToUrlStringFormat(date)}}return{getI18N:function(){return i18Nlang}}});