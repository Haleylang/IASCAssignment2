define("video-player",function(require){"use strict";var $=require("jquery"),vimeo=require("video-player-vimeo"),youtube=require("video-player-youtube");var defaults={source:"",onBuffer:$.noop,onCue:$.noop,onPause:$.noop,onPlay:$.noop,onPlayerReady:$.noop,onStop:$.noop,onFinish:$.noop,onTogglePlayback:$.noop,onVideoStopped:$.noop,appendThumbnail:true,positionThumbnail:$.noop,src:null,isToggleImageOnPlay:false,isToggleOverlayOnPlay:false};function create(element,options){var player={};player.element=element;player.parentElement=element.parentElement;player.options=$.extend({},defaults,options);bind(player);player.init();return player.player}function createPlaceholderImageOnly(element){var player={};player.element=element;player.parentElement=element.parentElement;player.options={positionThumbnail:$.noop,onPause:$.noop,onTogglePlayback:$.noop};bind(player);player.init(true);return player}function bind(player){player.init=init.bind(player);player.play=play.bind(player);player.pause=pause.bind(player);player.togglePlayback=togglePlayback.bind(player);player.setThumbnailImage=setThumbnailImage.bind(player);player.positionThumbnail=player.options.positionThumbnail.bind(player);player.createPlaceholderImageOnly=createPlaceholderImageOnly.bind(player);player.onPlay=onPlay.bind(player);player.onPause=player.options.onPause(player);player.onStop=onStop.bind(player);player.onTogglePlayback=player.options.onTogglePlayback(player)}function init(isPlaceholderImageOnly){var $element=$(this.element),$parentElement=$(this.parentElement),that=this,configuredOptions,playerOptions;if(!isPlaceholderImageOnly){configuredOptions=this.options;playerOptions={onFinish:this.options.onFinish,onPlay:function(){that.onPlay(configuredOptions);configuredOptions.onPlay()},onStop:function(){that.onStop(configuredOptions);configuredOptions.onStop()},onPlayProgress:this.options.onPlayProgress,onPause:this.options.onPause,onReady:this.options.onReady,onTogglePlayback:this.options.onTogglePlayback,appendThumbnail:this.options.appendThumbnail,positionThumbnail:this.options.positionThumbnail}}this.source=$element.data("mediatype");if(this.source==="vimeo"){this.url=$element.data("src");this.id=$element.data("vimeo-id");if(!isPlaceholderImageOnly){this.player=$.extend(this,vimeo.create(this.id,this.element,this.url,playerOptions))}setThumbnailImage($element,$parentElement,that.source,that.id,that)}else if(this.source==="youtube"){this.id=$element.data("youtube-id");if(!isPlaceholderImageOnly){this.player=$.extend(this,youtube.create(this.id,this.element,playerOptions))}setThumbnailImage($element,$parentElement,that.source,that.id,that)}this.dom={};this.dom.parentElement=$parentElement;this.dom.thumbnailImage=$parentElement.find(".vid-thumbnail");this.dom.overlay=$parentElement.find(".overlay-wrapper")}function setThumbnailImage(element,parentElement,source,nativeId,player){var protocol=window.location.protocol;if(element.attr("data-poster")){renderAndPositionThumbnail(element,parentElement,element.attr("data-poster"),player);return}if(source=="vimeo"){$.ajax({type:"GET",url:protocol+"//vimeo.com/api/v2/video/"+nativeId+".json",jsonp:"callback",dataType:"jsonp"}).success(function(data){var thumbnail=data[0].thumbnail_large;renderAndPositionThumbnail(element,parentElement,thumbnail,player)})}else if(source=="youtube"){var thumbnail=protocol+"//img.youtube.com/vi/"+nativeId+"/maxresdefault.jpg";renderAndPositionThumbnail(element,parentElement,thumbnail,player)}}function renderAndPositionThumbnail(element,parentElement,thumbnail,player){appendThumbnailImage(parentElement,thumbnail);player.options.positionThumbnail(element)}function appendThumbnailImage(parentElement,thumbnail){parentElement.append('<img class="vid-thumbnail" src="'+thumbnail+'" alt="video thumbnail"/>')}function play(){this.player.play();if(this.options.isToggleImageOnPlay){this.dom.thumbnailImage.hide()}}function pause(){this.player.pause()}function togglePlayback(){this.player.togglePlayback()}function onPlay(options){if(options.isToggleImageOnPlay){this.dom.thumbnailImage.hide()}if(options.isToggleOverlayOnPlay){this.dom.overlay.hide()}}function onStop(options){if(options.isToggleImageOnPlay){this.dom.thumbnailImage.show()}if(options.isToggleOverlayOnPlay){this.dom.overlay.show()}}return{create:create,createPlaceholderImageOnly:createPlaceholderImageOnly}});