define("condition-overlay",function(require){"use strict";var $=require("jquery"),helpers=require("helpers"),dom={},navItems=[];require("slick");var cookieManager=function(){var cookieName;function init(){cookieName=dom.component.data("switchable-stat-system-cookie-name")}function setCookie(system){helpers.setCookie(cookieName,system)}return{init:init,setCookie:setCookie}}();function init(){preInitDom();resizeProcesses();initDom();attachEventHandlers();cookieManager.init()}function preInitDom(){dom.overlayDesktop=$(".conditions-overlay-container-desktop");dom.overlayCarouselMobile=$(".carousel-items");dom.overlayCarouselMobileNavigation=$(".carousel-navigation")}function initDom(){dom.component=$(".condition-snippet-wrapper");dom.unitToggleContainers=$(".metric-toggle");dom.switchableStats=$(".switchable-stat");dom.temperatureValue=$(".weather-conditions-top-row-temp .value");dom.snowAmountValue=$(".weather-snow-top-amount .value");dom.titleBar=$(".carousel-navigation")}function attachEventHandlers(){$(window).on("resize",helpers.debounce(resizeProcesses,10,true));attachUnitToggleEventHandlers()}function attachUnitToggleEventHandlers(){dom.unitToggleContainers.on("click",toggleSwitchableStat);dom.temperatureValue.on("click",toggleSwitchableStat);dom.snowAmountValue.on("click",toggleSwitchableStat)}function resizeProcesses(){initOrDestroyCarousel()}function initOrDestroyCarousel(){if(helpers.windowWidthsGreaterThan(1200)){destroyCarousel()}else{initCarousel()}}function initCarousel(){if(carouselInitalized()){return}cloneAndAppendSections();dom.overlayCarouselMobile.on("beforeChange",function(event,slick,currentSlide,nextSlide){navItems[currentSlide].removeClass("active");navItems[nextSlide].addClass("active");scrollTitleBar()});dom.overlayCarouselMobile.slick({arrows:false,dots:true,infinite:false,mobileFirst:true,slidesToScroll:1,slidesToShow:1})}function cloneAndAppendSections(){var conditionSectionsDesktop=dom.overlayDesktop.find(".conditions-section");if(conditionSectionsDesktop.length===navItems.length){return}conditionSectionsDesktop.each(function(index){var $this=$(this);var navText=$this.find(".conditions-section-header-text").text();var navItem=$('<div class="carousel-navigation-item"></div>').text(navText);if(index===0){navItem.addClass("active")}navItem.appendTo(dom.overlayCarouselMobileNavigation);navItem.on("click",function(){dom.overlayCarouselMobile.slick("slickGoTo",index);scrollTitleBar()});navItems.push(navItem);$this.clone().appendTo(dom.overlayCarouselMobile)})}function scrollTitleBar(){dom.titleBar.find(".carousel-navigation-item.active")[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}function destroyCarousel(){if(!carouselInitalized()){return}dom.overlayCarouselMobile.empty();dom.overlayCarouselMobile.slick("unslick");attachUnitToggleEventHandlers()}function carouselInitalized(){return dom.overlayCarouselMobile.hasClass("slick-initialized")}function refreshCarousel(){if(!carouselInitalized()){return}dom.overlayCarouselMobile.slick("refresh")}function toggleSwitchableStat(e){var target=$(e.target);var activeToggleClass="metric-toggle-unit--active";if(target.hasClass(activeToggleClass)){return}dom.switchableStats.each(function(i,stat){$(stat).find(".switchable-stat-item").each(function(i,m){var metric=$(m);var hiddenClass="d-none";if(metric.hasClass(hiddenClass)){metric.removeClass(hiddenClass)}else{metric.addClass(hiddenClass)}})});dom.unitToggleContainers.each(function(i,container){var $container=$(container);$container.find(".metric-toggle-unit").each(function(i,unitToggle){var $unitToggle=$(unitToggle);if($unitToggle.hasClass(activeToggleClass)){$unitToggle.removeClass(activeToggleClass)}else{$unitToggle.addClass(activeToggleClass)}})});cookieManager.setCookie(target.hasClass("metric-toggle-unit--metric")?"metric":"imperial")}init();return{carouselInitalized:carouselInitalized,attachEventHandlers:attachEventHandlers,refreshCarousel:refreshCarousel}});